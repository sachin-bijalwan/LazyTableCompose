# LazyTable (Compose Multiplatform)

**LazyTable** is a 2D lazy-loading grid library for [Compose Multiplatform](https://www.jetbrains.com/lp/compose-multiplatform/). It allows you to create efficient, infinitely scrolling tables with sticky headers on **Android** and **iOS**.


### UI
https://github.com/user-attachments/assets/a723c6dd-a00f-4ed1-b118-e05436215d31

## Features
-   **Lazy Loading**: Efficiently renders only visible items in both dimensions (rows and columns).
-   **Sticky Headers**: Supports sticky row headers and sticky column headers.
-   **Multiplatform**: Works on Android and iOS (via Compose Multiplatform).
-   **Customizable**: Full control over cell content and headers via Composable lambdas.

## Installation

### 1. Add Repository
Add the repository to your `settings.gradle.kts` or root `build.gradle.kts`. Note that this package is hosted on **GitHub Packages**, so you may need authentication.

```kotlin
dependencyResolutionManagement {
    repositories {
        maven {
            name = "GitHubPackages"
            url = uri("https://maven.pkg.github.com/sachin-bijalwan/LazyTableCompose")
            credentials {
                username = System.getenv("GITHUB_ACTOR") ?: property("gpr.user") as String
                password = System.getenv("GITHUB_TOKEN") ?: property("gpr.token") as String
            }
        }
    }
}
```

### 2. Add Dependency
Add the dependency to your `commonMain` source set in your KMP module's `build.gradle.kts`:

```kotlin
// module: build.gradle.kts
kotlin {
    sourceSets {
        commonMain.dependencies {
            implementation("com.zeel.lazyinfinitegrid:lazyinfinitegrid:0.0.4")
        }
    }
}
```

## Usage

You can use the `LazyTable` composable anywhere in your Compose Multiplatform code (e.g., in `commonMain`).

```kotlin
LazyTable(
    colCount = 50,
    rowCount = 100,
    heightInPixels = 120f, // Height of each cell
    maxVerticalScrollThatCanHappen = totalHeight - screenHeight,
    maxHorizontalScrollThatCanHappen = totalWidth - screenWidth,
    rowHeader = { index -> 
        Text("Row $index", Modifier.height(60.dp))
    },
    columnHeader = { index -> 
        Text("Col $index", Modifier.width(100.dp))
    }
) { rowIndex, colIndex ->
    // Content for cell at [rowIndex, colIndex]
    Text("Item $rowIndex:$colIndex")
}
```

## Running the Sample App

This repository contains a sample `app` module demonstrating usage on Android and iOS.

### Android
Open the project in Android Studio and run the `app` configuration on an Android emulator or device.

### iOS
The iOS app uses a native Xcode project (`lazyinfinitegridios`) that consumes the Compose Multiplatform framework generated by the `app` module.

1.  **Generate Framework**:
    ```bash
    ./gradlew :app:embedAndSignAppleFrameworkForXcode
    ```
2.  **Open Xcode**: Open `lazyinfinitegridios/lazyinfinitegridios.xcodeproj`.
3.  **Run**: Select a simulator and hit Run (Cmd+R).

## Architecture

This project is structured as a Kotlin Multiplatform project:
*   `:lazyinfinitegrid`: The core KMP library containing the `LazyTable` composable.
*   `:app`: A KMP client application that uses the library.
    *   **Android**: Standard Android entry point (`MainActivity`).
    *   **iOS**: Generates a framework (`ComposeApp`) consumed by the native iOS app.
*   `lazyinfinitegridios/`: A native SwiftUI iOS project that imports the KMP framework.
